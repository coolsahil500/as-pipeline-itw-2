namespace: default
secret_name: my-secret
data:
  username: admin
  password: mypassword
    - name: Deploy to Kubernetes
      run: |
        kubectl apply -f sealed-secrets/mysecret.yaml
        kubectl set image deployment/nodejs-app nodejs-app=$REPOSITORY_URI:$IMAGE_TAG
        kubectl rollout status deployment/nodejs-app
        kubectl get pods -l app=nodejs-app
        kubectl get svc -l app=nodejs-app
        kubectl get ingress -l app=nodejs-app
        kubectl get secrets my-secret -o yaml
        kubectl get deployments nodejs-app -o yaml
        kubectl get pods -l app=nodejs-app -o yaml
        kubectl get services nodejs-app -o yaml
        kubectl get ingress nodejs-app -o yaml
        kubectl describe deployment nodejs-app
        kubectl describe pod -l app=nodejs-app
        kubectl describe service nodejs-app
        kubectl describe ingress nodejs-app
        kubectl logs -l app=nodejs-app
        kubectl exec -it $(kubectl get pods -l app=nodejs-app -o jsonpath="{.items[0].metadata.name}") -- /bin/sh -c "echo 'Hello from the container!'"
        kubectl port-forward svc/nodejs-app 8080:80
        echo "Deployment completed successfully!"